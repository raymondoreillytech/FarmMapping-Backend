spring:
  datasource:
    # Use RDS URL on AWS, default to local PostgreSQL
    url: ${SPRING_DATASOURCE_URL:jdbc:postgresql://localhost:5432/farmmapping}
    username: ${SPRING_DATASOURCE_USERNAME:farmmapping}
    password: ${SPRING_DATASOURCE_PASSWORD:farmmapping}

  flyway:
    enabled: true
    locations: classpath:db/migration
    baseline-on-migrate: true
    baseline-version: 0

  jpa:
    hibernate:
      ddl-auto: validate
    properties:
      hibernate:
        default_schema: public

  servlet:
    multipart:
      # Use environment variables for upload limits
      max-file-size: ${MAX_FILE_SIZE:20MB}
      max-request-size: ${MAX_REQUEST_SIZE:20MB}

# Allow port configuration (critical for AWS App Runner or ECS)
server:
  port: ${PORT:8080}

app:
  storage:
    photos-dir: ${PHOTOS_DIR:./data/photos}
  # Moving hardcoded tree species to configuration
  business-rules:
    allowed-species: ${ALLOWED_SPECIES:PINE,OAK,PLANE,PRICKLY_PEAR_CACTUS,EUCALYPTUS}

logging:
  level:
    org.flywaydb: INFO
